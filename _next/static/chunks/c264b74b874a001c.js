(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16787,58594,48350,41635,e=>{"use strict";var r=e.i(43476);let t=({size:e="md",label:t="読み込み中...",className:s=""})=>(0,r.jsxs)("div",{className:`flex items-center justify-center ${s}`,role:"status",children:[(0,r.jsx)("div",{className:`${{sm:"w-4 h-4 border-2",md:"w-8 h-8 border-2",lg:"w-12 h-12 border-4"}[e]} border-blue-200 border-t-blue-600 rounded-full animate-spin dark:border-gray-600 dark:border-t-blue-400`,"aria-hidden":"true"}),(0,r.jsx)("span",{className:"sr-only",children:t})]});e.s(["Spinner",0,t],58594),e.s(["LoadingScreen",0,({message:e="読み込み中..."})=>(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6",children:(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)(t,{size:"lg",label:e}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 animate-pulse",children:e})]})})],48350);let s={"gradient-blue":"bg-gradient-to-r from-blue-500 to-cyan-500 text-white shadow-md","gradient-purple":"bg-gradient-to-r from-purple-700 to-pink-700 text-white shadow-md","gradient-green":"bg-gradient-to-r from-green-500 to-teal-500 text-white shadow-md",default:"bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900 dark:to-indigo-900 border-2 border-blue-200 dark:border-blue-700 shadow-lg"};e.s(["GradientCard",0,({children:e,className:t="",variant:a="default"})=>(0,r.jsx)("div",{className:`${s[a]} rounded-lg ${t}`,children:e})],41635),e.s([],16787)},95241,14131,67856,56867,3380,e=>{"use strict";var r=e.i(71645),t=e.i(56348),s=e.i(86134),a=e.i(85149);let d=async e=>(0,s.documentExists)(a.COLLECTIONS.ADMINS,e);e.s(["isAdmin",0,d],14131),e.s(["useAdminAccess",0,()=>{let{user:e,loading:s}=(0,t.useAuth)(),[a,i]=(0,r.useState)(!1),[n,l]=(0,r.useState)(!0),o=(0,r.useRef)(void 0);return(0,r.useEffect)(()=>{let r=!1,t=async()=>{let t=e?.uid??null;if(e&&!e.isAnonymous)try{let s=await d(e.uid);if(r)return;i(s),o.current=t}catch(e){if(r)return;console.error("管理者権限の確認に失敗しました:",e),i(!1),o.current=t}finally{if(r)return;l(!1)}else{if(r)return;i(!1),o.current=t,l(!1)}};if(!s){let r=e?.uid??null;o.current!==r&&(l(!0),t())}return()=>{r=!0}},[e,s]),{user:e,loading:s,isAdminUser:a,checking:n}}],95241);var i=e.i(43476);e.s(["UnauthorizedAccess",0,e=>{let r="not-logged-in"===e.type;return(0,i.jsx)("div",{className:"p-6 max-w-2xl mx-auto",children:(0,i.jsxs)("div",{className:`border rounded p-6 ${r?"bg-red-50 dark:bg-red-900 border-red-200 dark:border-red-800":"bg-yellow-50 dark:bg-yellow-900 border-yellow-200 dark:border-yellow-800"}`,children:[(0,i.jsx)("h2",{className:`text-xl font-bold mb-2 ${r?"text-red-800 dark:text-red-200":"text-yellow-800 dark:text-yellow-200"}`,children:r?"アクセス権限がありません":"管理者権限がありません"}),(0,i.jsx)("p",{className:`mb-4 ${r?"text-red-600 dark:text-red-300":"text-yellow-700 dark:text-yellow-300"}`,children:r?"管理者としてログインする必要があります。":(0,i.jsxs)(i.Fragment,{children:["このアカウントには管理者権限が付与されていません。",(0,i.jsx)("br",{}),"UID: ",e.uid]})}),(0,i.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600",onClick:e.onAction,children:r?"ホームに戻る":"ログアウト"})]})})}],67856),e.s(["AdminHeader",0,({email:e,userId:r,onLogout:t})=>(0,i.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-bold",children:"管理者画面"}),(0,i.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e||r})]}),(0,i.jsx)("button",{className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600",onClick:t,children:"ログアウト"})]})],56867),e.i(51718);var n=e.i(18357),l=e.i(59141);let o=async()=>{await (0,n.signOut)(l.auth)};e.s(["signOut",0,o],3380)},14603,e=>{"use strict";var r=e.i(43476),t=e.i(56867),s=e.i(85149);e.s(["AdminMenu",0,({userEmail:e,userId:a,onLogout:d})=>(0,r.jsxs)("main",{className:"p-6 max-w-4xl mx-auto",children:[(0,r.jsx)(t.AdminHeader,{email:e,userId:a,onLogout:d}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,r.jsxs)("a",{href:`${s.BASE_PATH}/admin/questions`,className:"block p-8 border rounded-lg bg-white shadow hover:shadow-lg transition-shadow dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"質問編集"})]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"アンケートの質問、回答選択肢、結果パターンを管理します"})]}),(0,r.jsxs)("a",{href:`${s.BASE_PATH}/admin/results`,className:"block p-8 border rounded-lg bg-white shadow hover:shadow-lg transition-shadow dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"アンケート結果確認"})]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"ユーザーから送信されたアンケート結果を確認します"})]})]})]})])},72906,e=>{"use strict";var r=e.i(43476),t=e.i(95241),s=e.i(67856),a=e.i(14603),d=e.i(3380);e.i(16787);var i=e.i(48350),n=e.i(85149);function l(){let{user:e,loading:l,isAdminUser:o,checking:c}=(0,t.useAdminAccess)(),u=async()=>{await (0,d.signOut)(),window.location.href=n.BASE_PATH+"/"};return l||c?(0,r.jsx)(i.LoadingScreen,{}):!e||e.isAnonymous?(0,r.jsx)(s.UnauthorizedAccess,{type:"not-logged-in",onAction:()=>{window.location.href=n.BASE_PATH+"/"}}):o?(0,r.jsx)(a.AdminMenu,{userEmail:e.email,userId:e.uid,onLogout:u}):(0,r.jsx)(s.UnauthorizedAccess,{type:"insufficient-permissions",uid:e.uid,onAction:u})}e.s(["default",()=>l])}]);