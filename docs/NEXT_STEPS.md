# 次のステップ (Next Steps)

実装が完了しました！以下の手順でアプリケーションをテストしてください。

## 1. 開発サーバーの起動

```bash
npm run dev
```

ブラウザで http://localhost:3000 を開きます。

## 2. 管理者の設定

アプリケーションをテストする前に、管理者アカウントを作成する必要があります。

### 手順:

1. **Firebase Console にアクセス**
   - https://console.firebase.google.com/
   - プロジェクトを選択

2. **Authentication でユーザーを作成**
   - 左メニュー → Authentication → Users
   - 「Add user」をクリック
   - メールアドレスとパスワードを入力（例: admin@example.com）
   - 作成されたユーザーの **UID** をコピー

3. **Firestore で管理者権限を付与**
   - 左メニュー → Firestore Database
   - コレクション `admins` を作成（まだない場合）
   - ドキュメントを追加:
     - Document ID: コピーしたUID
     - フィールドは不要（空のドキュメントでOK）

詳細な手順は `ADMIN_SETUP.md` を参照してください。

## 3. テスト手順

### A. 一般ユーザーとしてテスト

1. http://localhost:3000/ にアクセス
2. 「アンケートに回答する」ボタンをクリック
3. 表示名を入力（例: "山田太郎"）
4. アンケートが表示されれば成功！
   - **注意**: 最初は質問がないので、管理者で質問を作成する必要があります

### B. 管理者としてテスト

1. http://localhost:3000/ にアクセス
2. 「管理者ログイン」セクションに:
   - 手順2で作成したメールアドレスを入力
   - パスワードを入力
3. 「ログイン」ボタンをクリック
4. 自動的に `/admin` にリダイレクトされることを確認

### C. 管理者画面で質問を作成

1. 「新規質問作成」ボタンをクリック
2. 質問文を入力（例: "好きな色は？"）
3. 選択肢を入力（例: "赤"、"青"、"緑"）
4. 「作成」ボタンをクリック
5. 質問がリストに表示されることを確認

### D. 質問を編集・削除

1. 作成した質問の「編集」ボタンをクリック
2. 内容を変更して「更新」をクリック
3. 「削除」ボタンをクリックして削除を確認

### E. 一般ユーザーで回答をテスト

1. 別のブラウザまたはシークレットウィンドウで http://localhost:3000/ を開く
2. 「アンケートに回答する」をクリック
3. 名前を入力
4. 作成した質問に回答
5. 「送信」ボタンをクリック

### F. 管理者で結果を確認

1. 管理者画面で下にスクロール
2. 「回答結果」セクションに回答が表示されることを確認

## 4. よくある問題と解決方法

### 問題: 「管理者権限がありません」と表示される

**解決方法:**
- Firestore の `admins` コレクションに正しいUIDが設定されているか確認
- 画面に表示されているUIDと、Firestoreのドキュメント IDが一致しているか確認
- Firebase Console で Firestore を確認: `admins/{ユーザーのUID}`

### 問題: ログインできない

**解決方法:**
- Firebase Authentication でユーザーが作成されているか確認
- メールアドレスとパスワードが正しいか確認
- ブラウザのコンソールでエラーメッセージを確認

### 問題: 質問が表示されない

**解決方法:**
- まず管理者でログインして質問を作成してください
- Firestore の `questions` コレクションにドキュメントがあるか確認

### 問題: 回答が表示されない

**解決方法:**
- Firestore の `answers` コレクションにドキュメントがあるか確認
- Firebase Console で Firestore のセキュリティルールを確認

## 5. 本番環境へのデプロイ前に

### セキュリティルールの更新が必須

現在のFirestoreルールは開発用です。`ADMIN_SETUP.md` に記載されている本番用のセキュリティルールに更新してください。

### 環境変数の確認

以下の環境変数が設定されていることを確認:
- `NEXT_PUBLIC_FIREBASE_API_KEY`
- `NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN`
- `NEXT_PUBLIC_FIREBASE_PROJECT_ID`
- `NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET`
- `NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID`
- `NEXT_PUBLIC_FIREBASE_APP_ID`

## 6. 追加の機能が必要な場合

現在の実装は最小限の機能を提供しています。以下のような追加機能が必要な場合はお知らせください：

- ✅ 管理者のメール認証ログイン
- ✅ 質問のCRUD機能
- ✅ 回答結果の表示
- ❌ 質問の並び替え機能
- ❌ 回答のエクスポート機能（CSV等）
- ❌ 複数の管理者の管理
- ❌ アンケートの公開/非公開切り替え
- ❌ 回答の編集・削除
- ❌ グラフやチャートでの結果表示

## ドキュメント

詳細な情報は以下のドキュメントを参照してください：

- `ADMIN_SETUP.md` - 管理者セットアップの詳細手順
- `IMPLEMENTATION_SUMMARY.md` - 実装内容の詳細説明

## 質問や問題がある場合

実装に関して質問や問題がある場合は、お気軽にお尋ねください！
