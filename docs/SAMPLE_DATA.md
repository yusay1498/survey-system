# サンプルデータ設定ガイド (Sample Data Setup Guide)

このガイドでは、結果パターン機能をテストするためのサンプルデータの設定方法を説明します。

## ステップ 1: サンプル質問の作成

Firebase Firestoreの`questions`コレクションに以下の質問を追加してください。

### 質問1
```json
{
  "text": "休日の過ごし方は？",
  "options": ["外で活動的に", "家でゆっくり"],
  "order": 1
}
```

### 質問2
```json
{
  "text": "好きな飲み物は？",
  "options": ["コーヒー", "紅茶", "ジュース"],
  "order": 2
}
```

**重要**: 各質問のドキュメントIDをメモしてください（例: `q1_abc123`, `q2_def456`）

## ステップ 2: サンプル結果パターンの作成

Firebase Firestoreの`resultPatterns`コレクションに以下のパターンを追加してください。

### パターン1: 「アクティブなコーヒー好き」
```json
{
  "name": "アクティブなコーヒー好き",
  "message": "あなたは外で活動的に過ごし、コーヒーでエネルギーチャージするタイプです！",
  "description": "新しいことに挑戦するのが好きで、コーヒーの刺激であなたの活動はさらに加速します。常に行動的で、周りを引っ張る存在です。",
  "conditions": [
    {
      "questionId": "【質問1のID】",
      "selectedOption": "外で活動的に"
    },
    {
      "questionId": "【質問2のID】",
      "selectedOption": "コーヒー"
    }
  ],
  "priority": 10,
  "order": 1,
  "createdAt": "2024-01-24T00:00:00Z"
}
```

### パターン2: 「インドアな紅茶派」
```json
{
  "name": "インドアな紅茶派",
  "message": "あなたは家でゆっくり過ごし、紅茶を楽しむ癒し系タイプです！",
  "description": "静かな時間を大切にし、紅茶の優しい香りに包まれながらリラックスすることが至福のひととき。思慮深く、落ち着いた雰囲気を持っています。",
  "conditions": [
    {
      "questionId": "【質問1のID】",
      "selectedOption": "家でゆっくり"
    },
    {
      "questionId": "【質問2のID】",
      "selectedOption": "紅茶"
    }
  ],
  "priority": 10,
  "order": 2,
  "createdAt": "2024-01-24T00:00:00Z"
}
```

### パターン3: 「アクティブなジュース派」
```json
{
  "name": "アクティブなジュース派",
  "message": "あなたは外で活動的に過ごし、フレッシュなジュースで元気をもらうタイプです！",
  "description": "健康的でフレッシュなライフスタイルを大切にするあなた。自然の恵みを感じながら、アクティブに毎日を楽しんでいます。",
  "conditions": [
    {
      "questionId": "【質問1のID】",
      "selectedOption": "外で活動的に"
    },
    {
      "questionId": "【質問2のID】",
      "selectedOption": "ジュース"
    }
  ],
  "priority": 10,
  "order": 3,
  "createdAt": "2024-01-24T00:00:00Z"
}
```

### パターン4: 「インドアなコーヒー好き」
```json
{
  "name": "インドアなコーヒー好き",
  "message": "あなたは家でゆっくり過ごし、コーヒーの香りに包まれる落ち着いたタイプです！",
  "description": "静かな環境でコーヒーを味わいながら、読書や趣味に没頭する時間が大好き。集中力が高く、クリエイティブな一面も。",
  "conditions": [
    {
      "questionId": "【質問1のID】",
      "selectedOption": "家でゆっくり"
    },
    {
      "questionId": "【質問2のID】",
      "selectedOption": "コーヒー"
    }
  ],
  "priority": 10,
  "order": 4,
  "createdAt": "2024-01-24T00:00:00Z"
}
```

## ステップ 3: テスト

1. アプリケーションにアクセスし、匿名ログインします
2. 名前を入力します
3. アンケートに回答します：
   - 質問1で「外で活動的に」を選択
   - 質問2で「コーヒー」を選択
4. すべての質問に回答後、「結果を見る」をクリック
5. 「アクティブなコーヒー好き」の結果が表示されることを確認

## 異なる組み合わせのテスト

以下の組み合わせでもテストしてください：

| 質問1の回答 | 質問2の回答 | 期待される結果 |
|------------|-----------|--------------|
| 外で活動的に | コーヒー | アクティブなコーヒー好き |
| 家でゆっくり | 紅茶 | インドアな紅茶派 |
| 外で活動的に | ジュース | アクティブなジュース派 |
| 家でゆっくり | コーヒー | インドアなコーヒー好き |
| 外で活動的に | 紅茶 | デフォルトメッセージ |
| 家でゆっくり | ジュース | デフォルトメッセージ |

「デフォルトメッセージ」は、設定した結果パターンに一致しない場合に表示される基本的な完了メッセージです。

## 期待される画面表示

回答完了後、以下が表示されます：

1. **パーソナライズされた結果カード**（紫からピンクのグラデーション背景）
   - タイトル（例: 「アクティブなコーヒー好き」）
   - メインメッセージ
   - 詳細説明
   - 選択した回答のリスト

2. **全体の集計結果**（区切り線の下）
   - 各質問に対する全ユーザーの回答分布
   - 各選択肢を選んだユーザーの名前のリスト

## トラブルシューティング

### 結果パターンが表示されない場合

1. **質問IDの確認**
   - Firestoreコンソールで`questions`コレクションを開く
   - 各質問のドキュメントIDをコピー
   - `resultPatterns`の`conditions`内の`questionId`に正確に貼り付け

2. **選択肢テキストの確認**
   - `questions`コレクションの`options`配列の値と、`resultPatterns`の`selectedOption`の値が完全一致しているか確認
   - スペースや大文字小文字の違いに注意

3. **ブラウザのコンソールを確認**
   - 開発者ツール（F12）を開く
   - Consoleタブでエラーがないか確認
   - Networkタブで Firestore へのリクエストが成功しているか確認

## より複雑な例

3つ以上の質問がある場合の例：

### 質問3を追加
```json
{
  "text": "週末の理想的な時間は？",
  "options": ["朝", "昼", "夜"],
  "order": 3
}
```

### より詳細な結果パターン
```json
{
  "name": "朝活アクティブコーヒー派",
  "message": "あなたは朝から外で活動し、コーヒーで一日をスタートする早起きタイプです！",
  "description": "朝の新鮮な空気を吸いながら活動し、コーヒーでエネルギーをチャージ。1日を最大限に活用する効率的な生活者です。",
  "conditions": [
    {
      "questionId": "【質問1のID】",
      "selectedOption": "外で活動的に"
    },
    {
      "questionId": "【質問2のID】",
      "selectedOption": "コーヒー"
    },
    {
      "questionId": "【質問3のID】",
      "selectedOption": "朝"
    }
  ],
  "priority": 15,
  "order": 1,
  "createdAt": "2024-01-24T00:00:00Z"
}
```

**ポイント**: 条件が多い（より具体的な）結果パターンには、より高い`priority`値を設定してください。

## 参考資料

- [結果パターン設定ガイド](./RESULT_PATTERNS.md) - 詳細な設定方法
- [Firebase Console](https://console.firebase.google.com/) - データの管理
